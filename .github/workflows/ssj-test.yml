name: CI

permissions: read-all

on:
  pull_request:
    paths:
      - kakarot-ssj/**

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  build:
    uses: ./.github/workflows/ssj-build.yml
    with:
      artifact-name: kakarot-ssj-build

  tests-unit:
    uses: ./.github/workflows/ssj-tests-unit.yml
    with:
      run-fmt-check: true

  ef-tests:
    uses: ./.github/workflows/ssj-ef-tests.yml
    needs: [build]
    with:
      artifact-name: kakarot-ssj-build
